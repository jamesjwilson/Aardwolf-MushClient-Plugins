<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Wednesday, December 30, 2020, 9:39 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "Owned_7_Extender" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Owned_7_Extender"
   author="Stormwind"
   id="3b8f34a706cd63c7eb090577"
   language="Lua"
   purpose="To easily grab items output from owned 7"
   save_state="y"
   date_written="2020-12-30 21:36:41"
   requires="5.07"
   version="1.0"
   >
<description trim="y">
<![CDATA[
A script designed to make it easier to grab items inside a container displayed from owned 7.
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   match="Item                      Object Id      Lvl Room/Carrier     Area/Inside"
   name="owned7_finder_header_trigger"
   send_to="12"
   sequence="100"
  >
  <send>EnableTriggerGroup("owned7_capture_trigger", true)</send>
  </trigger>
  <trigger
   group="owned7_capture_trigger"
   match="^$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableTriggerGroup("owned7_capture_trigger", false)
EnableTrigger("owned7_finder_header_trigger", false)</send>
  </trigger>
  <trigger
   group="owned7_capture_trigger"
   match="^(?P&lt;itemName&gt;.{0,25})(\s+?)(?P&lt;objectId&gt;\d+)[\s\*]+?\d+\s\w+\*?\s+(?P&lt;containerId&gt;\d+)?$"
   regexp="y"
   sequence="100"
   script="read_item"
   omit_from_output="y"
  >
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="owned7"
   enabled="y"
   send_to="12"
   omit_from_output="y"
   sequence="100"
  >
  <send>EnableTrigger("owned7_finder_header_trigger", true)
Send("owned 7")</send>
  </alias>
</aliases>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="owned7 help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end

function read_item (name, line, args, styles)
	for _,v in ipairs(styles) 
		do ColourTell(RGBColourToName(v.textcolour), RGBColourToName(v.backcolour), v.text) 
	end
	
	if (tonumber(args.containerId)) then
		ColourTell("", "", "  ")
		Hyperlink ("get "..args.objectId.." from "..args.containerId, "[get]", "Grab this item from the container", "lime", "", 0, 1)
	end
end


]]>
</script> 

</muclient>
